var Utils=function(){function t(){}return t.getTransformPrefix=function(){for(var t=document.createElement("div"),e=["webkit","Moz","O","ms"],r=0;r<e.length;r++){var i=e[r],n=i+"Transform";if("undefined"!=typeof t.style[n])return t=null,n}},t.getTransitionPrefix=function(){for(var t=document.createElement("div"),e=["webkit","Moz","O","ms"],r=0;r<e.length;r++){var i=e[r],n=i+"Transition";if("undefined"!=typeof t.style[n])return t=null,n}},t.rand=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t}(),GridFont=function(){function t(t,e,r){var i=this;this.scale=1,this.cycle="random",this.font="",this.textAlign="left",this.hJitterMin=0,this.hJitterMax=0,this.vJitterMin=0,this.vJitterMax=0,this.rJitterMin=0,this.rJitterMax=0,this.atIndexes={},this.container=t,this.text=e,this.xform=Utils.getTransformPrefix(),this.mergeOptions(r),this.font?(this.imagePath=this.font.replace("/data.json","/img"),$.get(this.font,function(t){i.fontConfig=t,i.fontConfig.line_spacing*=i.scale,i.fontConfig.line_height*=i.scale,i.fontConfig.character_width*=i.scale,i.init()})):console.error('GridFont: No "font" attribute in the options!')}return t.prototype.init=function(){this.container.addClass("gridFont"),this.container.css({"text-align":this.textAlign}),this.createText()},t.prototype.createText=function(){for(var t=this.text,e=t.split(" "),r=0;r<e.length;r++){var i=e[r];0!=r&&(i=" "+i);var n=this.createWord(i);this.container.append(n)}},t.prototype.createWord=function(t){var e=$('<div class = "word"></div>');e.css({"margin-bottom":this.fontConfig.line_spacing,height:this.fontConfig.line_height});for(var r=0;r<t.length;r++){var i=t[r],n=this.createCharacter(i);e.append(n)}return e},t.prototype.createCharacter=function(t){var e=this.getProfile(t),r=this.getCharacterContainerWidth(e),i=this.getCharacterDimensions(e),n=$('<div class = "characterHolder"></div>');n.css({width:r,height:this.fontConfig.line_height});var a=$('<div class = "character"></div>');a.css(i),this.addJitter(a);var o=$('<div class = "innerCharacter"></div>'),s=this.getInnerPosition(e);if(" "!=t){var h=t.charCodeAt(0),c=this.fontConfig[h];if(c){var u=this.fontConfig.font_name+"_"+this.getCharImage(h,c),l=this.imagePath+"/"+h+"/"+u;o.css("background-image","url("+l+")")}}var f=4*this.fontConfig.character_width*(1/this.scale);100*this.scale;return o.addClass(s),o.css({width:f,height:f,"margin-left":-f/2,transform:"scale("+this.scale+", "+this.scale+")"}),"center"==s&&o.css("margin-top",-f/2),a.append(o),n.append(a),n},t.prototype.getCharImage=function(t,e){var r;return"sequential"==this.cycle?this.atIndexes.hasOwnProperty(t)?(r=this.atIndexes[t],e[r]||(r=0),this.atIndexes[t]=r+1):(r=0,this.atIndexes[t]=1):r=Utils.rand(0,e.length-1),e[r]},t.prototype.addJitter=function(t){var e=0,r=0,i=0;0==this.hJitterMin&&0==this.hJitterMax||(e=Utils.rand(this.hJitterMin,this.hJitterMax)),0==this.vJitterMin&&0==this.vJitterMax||(r=Utils.rand(this.vJitterMin,this.vJitterMax)),0==this.rJitterMin&&0==this.rJitterMax||(i=Utils.rand(this.rJitterMin,this.rJitterMax));var n="translate3d("+e+"px,"+r+"px, 0px) rotate("+i+"deg)";t.css({transform:n})},t.prototype.getProfile=function(t){var e=t.charCodeAt(0),r={space:[32],lowercase:[97,99,101,105,109,110,111,114,115,117,118,119,120,122],lowercase_tall:[98,100,102,104,107,108,116],lowercase_low:[103,106,112,113,121],uppercase:[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,49,50,51,52,53,54,55,56,57,48],punctuation_low:[44,46,95],punctuation_high:[94,96,39,34],punctuation_tall:[33,123,125,124,91,93,40,41],punctuation_middle:[60,62,61,42,43,59,58,126,45],punctuation_full:[64,35,36,37,38,63,47]};for(var i in r)if(r.hasOwnProperty(i)){var n=r[i];if(n.indexOf(e)!=-1)return i}return null},t.prototype.getCharacterDimensions=function(t){var e=this.fontConfig.character_width,r=this.fontConfig.line_height;switch(t){case"lowercase":return{height:e,bottom:0};case"lowercase_tall":return{height:r,bottom:0};case"lowercase_low":return{height:r,bottom:-r+e};case"uppercase":return{height:r,bottom:0};case"punctuation_low":return{height:e/2,bottom:0};case"punctuation_tall":return{height:r,bottom:0};case"punctuation_full":return{height:r,bottom:0};default:return{height:e,bottom:0}}},t.prototype.getInnerPosition=function(t){switch(t){case"lowercase":return"up";case"lowercase_tall":return"up";case"lowercase_low":return"down";case"uppercase":return"up";case"punctuation_low":return"center";case"punctuation_tall":return"up";case"punctuation_full":return"up";default:return"up"}},t.prototype.getCharacterContainerWidth=function(t){var e=this.fontConfig.character_width;switch(t){case"lowercase":return e;case"lowercase_tall":return.9*e;case"lowercase_low":return.9*e;case"uppercase":return 2*e;case"punctuation_low":return.8*e;case"punctuation_tall":return.8*e;case"punctuation_full":return 1.5*e;default:return e}},t.prototype.mergeOptions=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},t}();
//# sourceMappingURL=gridfont.min.js.map
